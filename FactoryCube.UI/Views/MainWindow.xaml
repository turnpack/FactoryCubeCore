<Window x:Class="FactoryCube.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:FactoryCube.UI"
        xmlns:halcon="http://schemas.mvtec.com/halcondotnet"
        Title="FactoryCube" Height="800" Width="1200"
        mc:Ignorable="d">

    <DockPanel>

        <!-- Menu Bar -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="File">
                <MenuItem Header="Exit" Click="Exit_Click"/>
            </MenuItem>
            <MenuItem Header="View">
                <MenuItem Header="Toggle Log Window"/>
            </MenuItem>
        </Menu>

        <!-- Toolbar -->
        <ToolBar DockPanel.Dock="Top">
            <Button Content="Start Preview" Command="{Binding StartPreviewCommand}" />
            <Button Content="Stop Preview" Command="{Binding StopPreviewCommand}" />
            <Button Content="Refresh" Command="{Binding RefreshCamerasCommand}" />
            <ComboBox ItemsSource="{Binding AvailableCameras}"
                      SelectedItem="{Binding SelectedCamera}"
                      DisplayMemberPath="Name"
                      Width="250"/>
        </ToolBar>

        <!-- Status Bar -->
        <StatusBar DockPanel.Dock="Bottom">
            <TextBlock Text="{Binding StatusMessage}" />
        </StatusBar>

        <!-- Main Workspace -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="200"/>
            </Grid.RowDefinitions>

            <!-- Live Image View -->
            <Border Grid.Column="0" Grid.Row="0" Margin="10" BorderBrush="Gray" BorderThickness="1">
                <halcon:HSmartWindowControlWPF x:Name="HalconView"
                                               Loaded="HalconView_Loaded"
                                           Grid.Row="0"
                                           Grid.Column="1"
                                           Margin="10"
                                           HorizontalAlignment="Stretch"
                                           VerticalAlignment="Stretch"/>
            </Border>

            <!-- Camera Settings Panel -->
            <StackPanel Grid.Column="1" Grid.Row="0" Margin="10" Orientation="Vertical">
                <TextBlock Text="Exposure Time (us)" Margin="0,10,0,2"/>
                <Slider Minimum="100" Maximum="50000" TickFrequency="1000"
                        Value="{Binding SelectedCamera.ExposureTime, Mode=TwoWay}" />

                <TextBlock Text="Frame Rate (fps)" Margin="0,10,0,2"/>
                <Slider Minimum="1" Maximum="60" TickFrequency="1"
                        Value="{Binding SelectedCamera.FrameRate, Mode=TwoWay}" />

                <TextBlock Text="Gain (dB)" Margin="0,10,0,2"/>
                <Slider Minimum="0" Maximum="24" TickFrequency="1"
                        Value="{Binding SelectedCamera.Gain, Mode=TwoWay}" />

                <TextBlock Text="Trigger Mode" Margin="0,10,0,2"/>
                <ComboBox SelectedItem="{Binding SelectedCamera.TriggerMode, Mode=TwoWay}">
                    <ComboBoxItem Content="On" />
                    <ComboBoxItem Content="Off" />
                    <ComboBoxItem Content="Software" />
                </ComboBox>

                <Button Content="Apply Settings"
                        Command="{Binding ApplyCameraSettingsCommand}"
                        Margin="0,20,0,0"
                        HorizontalAlignment="Left"/>
            </StackPanel>

            <!-- Log Output -->
            <TextBox Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1"
                     Margin="5"
                     FontFamily="Consolas"
                     FontSize="12"
                     Text="{Binding LogOutput}"
                     IsReadOnly="True"
                     TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"/>
        </Grid>
    </DockPanel>
</Window>
